# í‘¸ì‹œ ì•Œë¦¼ ì‹œìŠ¤í…œ ì†ŒìŠ¤ ìˆ˜ì • ì‚¬í•­

**ì‘ì—…ì¼**: 2025-12-18
**ì‘ì—…ì**: Claude Code
**ë²„ì „**: 2.0.0

---

## ğŸ“‹ ëª©ì°¨

1. [ì‘ì—… ê°œìš”](#ì‘ì—…-ê°œìš”)
2. [ì‹ ê·œ íŒŒì¼](#ì‹ ê·œ-íŒŒì¼)
3. [ìˆ˜ì • íŒŒì¼](#ìˆ˜ì •-íŒŒì¼)
4. [ë³€ê²½ ì‚¬í•­ ìƒì„¸](#ë³€ê²½-ì‚¬í•­-ìƒì„¸)
5. [ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)
6. [ì‚¬ìš© ë°©ë²•](#ì‚¬ìš©-ë°©ë²•)

---

## ì‘ì—… ê°œìš”

### ëª©ì 
- Firebase JSON íŒŒì¼ê³¼ í† í”½ ì„¤ì •ì„ ë™ì ìœ¼ë¡œ ê´€ë¦¬ ê°€ëŠ¥í•˜ë„ë¡ ê°œì„ 
- edumars.net/push_dashboard/admin/devices.phpì˜ ì•Œë¦¼ ì „ì†¡ ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ í†µí•©
- ì„¤ì • ë³€ê²½ì„ ìœ„í•œ ê´€ë¦¬ì UI ì¶”ê°€

### ì£¼ìš” ë³€ê²½ ì‚¬í•­
1. âœ… **config.php ì¶”ê°€**: ì„¤ì • íŒŒì¼ ê´€ë¦¬ ì‹œìŠ¤í…œ
2. âœ… **settings.php ì¶”ê°€**: ì„¤ì • ê´€ë¦¬ ì›¹ UI
3. âœ… **index.php ìˆ˜ì •**: ì•Œë¦¼ì„¤ì • ë²„íŠ¼ ì¶”ê°€
4. âœ… **push_api.php ê°œì„ **: config.php ì‚¬ìš© ë° ì‘ë‹µ ë©”ì‹œì§€ ê°œì„ 

---

## ì‹ ê·œ íŒŒì¼

### 1. config.php

**íŒŒì¼ ê²½ë¡œ**: `/www/push_dashboard/new_http_v1_mars/config.php`

**ëª©ì **: Firebase ì„œë¹„ìŠ¤ ê³„ì • JSON íŒŒì¼ê³¼ í† í”½ ì„¤ì •ì„ ì¤‘ì•™ì—ì„œ ê´€ë¦¬

**ì£¼ìš” ê¸°ëŠ¥**:
```php
// ì„¤ì • íŒŒì¼ ì½ê¸°/ì“°ê¸°
- get_push_config()           // í˜„ì¬ ì„¤ì • ë°˜í™˜
- save_push_config($config)   // ì„¤ì • ì €ì¥
- get_firebase_json_path()    // Firebase JSON íŒŒì¼ ê²½ë¡œ
- get_topic_name()             // í˜„ì¬ í† í”½ ì´ë¦„
- get_project_id()             // Firebase í”„ë¡œì íŠ¸ ID

// ìœ íš¨ì„± ê²€ì‚¬
- validate_topic_name($topic)         // í† í”½ ì´ë¦„ ê²€ì¦
- validate_firebase_json($file_path)  // Firebase JSON íŒŒì¼ ê²€ì¦
```

**ì„¤ì • íŒŒì¼ êµ¬ì¡°** (`push_config.json`):
```json
{
    "firebase_json_file": "mars-38372-firebase-adminsdk-60l5a-23f211e854.json",
    "topic_name": "news_test",
    "project_id": "mars-38372"
}
```

**ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ**:
```php
<?php
/**
 * ========================================
 * í‘¸ì‹œ ì•Œë¦¼ ì‹œìŠ¤í…œ ì„¤ì • íŒŒì¼
 * ========================================
 *
 * Firebase ì„œë¹„ìŠ¤ ê³„ì • JSON íŒŒì¼ê³¼ í† í”½ ì„¤ì •ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
 *
 * @file    config.php
 * @created 2025-12-18
 * @version 1.0.0
 */

// ì„¤ì • íŒŒì¼ ê²½ë¡œ
define('CONFIG_FILE', __DIR__ . '/push_config.json');

/**
 * ê¸°ë³¸ ì„¤ì •ê°’
 */
$default_config = [
    'firebase_json_file' => 'mars-38372-firebase-adminsdk-60l5a-23f211e854.json',
    'topic_name' => 'news_test',
    'project_id' => 'mars-38372'
];

/**
 * ì„¤ì • íŒŒì¼ ì½ê¸°
 */
function get_push_config() {
    global $default_config;
    if (file_exists(CONFIG_FILE)) {
        $config_content = file_get_contents(CONFIG_FILE);
        $config = json_decode($config_content, true);
        if (json_last_error() === JSON_ERROR_NONE) {
            return array_merge($default_config, $config);
        }
    }
    return $default_config;
}

/**
 * ì„¤ì • íŒŒì¼ ì €ì¥
 */
function save_push_config($config) {
    $json_content = json_encode($config, JSON_PRETTY_PRINT | JSON_UNESCAPED_UNICODE);
    $result = file_put_contents(CONFIG_FILE, $json_content);
    return $result !== false;
}

/**
 * Firebase JSON íŒŒì¼ ê²½ë¡œ ê°€ì ¸ì˜¤ê¸°
 */
function get_firebase_json_path() {
    $config = get_push_config();
    return __DIR__ . '/' . $config['firebase_json_file'];
}

/**
 * í˜„ì¬ í† í”½ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
 */
function get_topic_name() {
    $config = get_push_config();
    return $config['topic_name'];
}

/**
 * Firebase í”„ë¡œì íŠ¸ ID ê°€ì ¸ì˜¤ê¸°
 */
function get_project_id() {
    $config = get_push_config();
    return $config['project_id'];
}

/**
 * í† í”½ ì´ë¦„ ìœ íš¨ì„± ê²€ì‚¬
 *
 * FCM í† í”½ ì´ë¦„ ê·œì¹™:
 * - ì˜ë¬¸ì, ìˆ«ì, ë°‘ì¤„(_), í•˜ì´í”ˆ(-)ë§Œ ì‚¬ìš© ê°€ëŠ¥
 * - 1~900ì ê¸¸ì´
 */
function validate_topic_name($topic_name) {
    if (strlen($topic_name) < 1 || strlen($topic_name) > 900) {
        return false;
    }
    if (!preg_match('/^[a-zA-Z0-9_-]+$/', $topic_name)) {
        return false;
    }
    return true;
}

/**
 * Firebase JSON íŒŒì¼ ìœ íš¨ì„± ê²€ì‚¬
 */
function validate_firebase_json($file_path) {
    $result = [
        'valid' => false,
        'message' => '',
        'data' => null
    ];

    // íŒŒì¼ ì¡´ì¬ í™•ì¸
    if (!file_exists($file_path)) {
        $result['message'] = 'íŒŒì¼ì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.';
        return $result;
    }

    // íŒŒì¼ ì½ê¸°
    $content = file_get_contents($file_path);
    if ($content === false) {
        $result['message'] = 'íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.';
        return $result;
    }

    // JSON íŒŒì‹±
    $data = json_decode($content, true);
    if (json_last_error() !== JSON_ERROR_NONE) {
        $result['message'] = 'JSON í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤: ' . json_last_error_msg();
        return $result;
    }

    // í•„ìˆ˜ í‚¤ í™•ì¸
    $required_keys = ['type', 'project_id', 'private_key', 'client_email', 'token_uri'];
    $missing_keys = [];

    foreach ($required_keys as $key) {
        if (!isset($data[$key]) || empty($data[$key])) {
            $missing_keys[] = $key;
        }
    }

    if (!empty($missing_keys)) {
        $result['message'] = 'í•„ìˆ˜ í‚¤ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤: ' . implode(', ', $missing_keys);
        return $result;
    }

    // ì„œë¹„ìŠ¤ ê³„ì • íƒ€ì… í™•ì¸
    if ($data['type'] !== 'service_account') {
        $result['message'] = 'ì˜¬ë°”ë¥¸ ì„œë¹„ìŠ¤ ê³„ì • íŒŒì¼ì´ ì•„ë‹™ë‹ˆë‹¤.';
        return $result;
    }

    // ëª¨ë“  ê²€ì¦ í†µê³¼
    $result['valid'] = true;
    $result['message'] = 'ìœ íš¨í•œ Firebase ì„œë¹„ìŠ¤ ê³„ì • íŒŒì¼ì…ë‹ˆë‹¤.';
    $result['data'] = [
        'project_id' => $data['project_id'],
        'client_email' => $data['client_email']
    ];

    return $result;
}

// ì´ˆê¸°í™”: ì„¤ì • íŒŒì¼ì´ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ìœ¼ë¡œ ìƒì„±
if (!file_exists(CONFIG_FILE)) {
    save_push_config($default_config);
}
?>
```

---

### 2. settings.php

**íŒŒì¼ ê²½ë¡œ**: `/www/push_dashboard/new_http_v1_mars/settings.php`

**ëª©ì **: Firebase ì„œë¹„ìŠ¤ ê³„ì • JSON íŒŒì¼ê³¼ í† í”½ì„ ì›¹ UIì—ì„œ ê´€ë¦¬

**ì£¼ìš” ê¸°ëŠ¥**:
1. **í† í”½ ì„¤ì • ê´€ë¦¬**
   - í˜„ì¬ í† í”½ ì´ë¦„ í‘œì‹œ
   - í† í”½ ì´ë¦„ ë³€ê²½
   - ìœ íš¨ì„± ê²€ì‚¬ (ì˜ë¬¸ì, ìˆ«ì, ë°‘ì¤„, í•˜ì´í”ˆë§Œ í—ˆìš©)

2. **Firebase JSON íŒŒì¼ ê´€ë¦¬**
   - í˜„ì¬ íŒŒì¼ ì •ë³´ í‘œì‹œ (íŒŒì¼ëª…, í”„ë¡œì íŠ¸ ID, í´ë¼ì´ì–¸íŠ¸ ì´ë©”ì¼)
   - ë‹¤ë¥¸ JSON íŒŒì¼ ì„ íƒ
   - JSON íŒŒì¼ ë‚´ìš© ì§ì ‘ í¸ì§‘
   - ìë™ í¬ë§·íŒ… ê¸°ëŠ¥
   - ìˆ˜ì • ì‹œ ìë™ ë°±ì—… (*.backup.YmdHis í˜•ì‹)

3. **ë°±ì—… íŒŒì¼ ê´€ë¦¬**
   - ë°±ì—… íŒŒì¼ ëª©ë¡ í‘œì‹œ
   - íŒŒì¼ í¬ê¸° ë° ìƒì„± ì‹œê°„ í‘œì‹œ

**í™”ë©´ êµ¬ì„±**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°     â”‚
â”‚                                     â”‚
â”‚ âš™ï¸ í‘¸ì‹œ ì•Œë¦¼ ì„¤ì • ê´€ë¦¬              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì„±ê³µ/ì˜¤ë¥˜ ë©”ì‹œì§€ ì˜ì—­]              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¢ í† í”½ ì„¤ì •                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ í† í”½ ì´ë¦„: [news_test    ]      â”‚ â”‚
â”‚ â”‚ [í† í”½ ì´ë¦„ ì €ì¥]                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ”§ Firebase ì„œë¹„ìŠ¤ ê³„ì • ì„¤ì •        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ í˜„ì¬ íŒŒì¼: mars-38372....json   â”‚ â”‚
â”‚ â”‚ í”„ë¡œì íŠ¸ ID: mars-38372         â”‚ â”‚
â”‚ â”‚                                 â”‚ â”‚
â”‚ â”‚ JSON íŒŒì¼ ì„ íƒ: [â–¼]             â”‚ â”‚
â”‚ â”‚ [íŒŒì¼ ë³€ê²½]                     â”‚ â”‚
â”‚ â”‚                                 â”‚ â”‚
â”‚ â”‚ JSON ë‚´ìš© í¸ì§‘:                 â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚ â”‚ â”‚ {                           â”‚ â”‚ â”‚
â”‚ â”‚ â”‚   "type": "service_account",â”‚ â”‚ â”‚
â”‚ â”‚ â”‚   ...                       â”‚ â”‚ â”‚
â”‚ â”‚ â”‚ }                           â”‚ â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚ â”‚ [JSON íŒŒì¼ ì €ì¥] [ìë™ í¬ë§·íŒ…]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“¦ ë°±ì—… íŒŒì¼ ê´€ë¦¬                   â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ mars-38372....json.backup....   â”‚ â”‚
â”‚ â”‚ (ë°±ì—… íŒŒì¼ ëª©ë¡)                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì²˜ë¦¬ ì•¡ì…˜**:
```php
// POST ì•¡ì…˜ ì²˜ë¦¬
if ($_POST['action'] === 'update_topic') {
    // í† í”½ ì´ë¦„ ë³€ê²½
}
elseif ($_POST['action'] === 'update_firebase_json') {
    // Firebase JSON íŒŒì¼ ë‚´ìš© ìˆ˜ì •
    // ìë™ ë°±ì—… ìƒì„±
}
elseif ($_POST['action'] === 'change_firebase_file') {
    // ë‹¤ë¥¸ Firebase JSON íŒŒì¼ë¡œ ë³€ê²½
}
```

---

## ìˆ˜ì • íŒŒì¼

### 1. index.php

**íŒŒì¼ ê²½ë¡œ**: `/www/push_dashboard/new_http_v1_mars/index.php`

#### ë³€ê²½ ì „ (line 119-122):
```php
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h3 class="m-0">í‘¸ì‹œ ì•Œë¦¼ ì‹œìŠ¤í…œ</h3>
    </div>
```

#### ë³€ê²½ í›„ (line 119-126):
```php
<div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
        <h3 class="m-0">í‘¸ì‹œ ì•Œë¦¼ ì‹œìŠ¤í…œ</h3>
        <!-- ì•Œë¦¼ì„¤ì • ë²„íŠ¼ ì¶”ê°€ -->
        <a href="settings.php" class="btn btn-light btn-sm">
            <i class="fas fa-cog"></i> ì•Œë¦¼ì„¤ì •
        </a>
    </div>
```

**ë³€ê²½ ì‚¬í•­**:
- ì¹´ë“œ í—¤ë” ìš°ì¸¡ì— "ì•Œë¦¼ì„¤ì •" ë²„íŠ¼ ì¶”ê°€
- settings.phpë¡œ ì´ë™í•˜ëŠ” ë§í¬
- Font Awesome ì•„ì´ì½˜ ì‚¬ìš© (fas fa-cog)

---

### 2. push_api.php

**íŒŒì¼ ê²½ë¡œ**: `/www/push_dashboard/new_http_v1_mars/push_api.php`

#### ì£¼ìš” ë³€ê²½ ì‚¬í•­:

**1) íŒŒì¼ í—¤ë” ë° config.php ë¡œë“œ**

ë³€ê²½ ì „ (line 1-17):
```php
<?php
/**
 * í‘¸ì‹œ ì•Œë¦¼ API
 *
 * ì´ íŒŒì¼ì€ HTTP ìš”ì²­ì„ í†µí•´ í‘¸ì‹œ ì•Œë¦¼ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.
 * GET ë˜ëŠ” POST ìš”ì²­ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 *
 * @author  ê°œë°œì
 * @version 1.0.0
 */

// ì˜¤ë¥˜ ë³´ê³  ì„¤ì •
error_reporting(E_ALL);
ini_set('display_errors', 1);

// í—¤ë” ì„¤ì • - JSON ì‘ë‹µ
header('Content-Type: application/json');
```

ë³€ê²½ í›„ (line 1-28):
```php
<?php
/**
 * ========================================
 * í‘¸ì‹œ ì•Œë¦¼ API (ê°œì„  ë²„ì „)
 * ========================================
 *
 * ì´ íŒŒì¼ì€ HTTP ìš”ì²­ì„ í†µí•´ í‘¸ì‹œ ì•Œë¦¼ì„ ë³´ë‚¼ ìˆ˜ ìˆëŠ” APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.
 * GET ë˜ëŠ” POST ìš”ì²­ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 *
 * @file    push_api.php
 * @updated 2025-12-18
 * @version 2.0.0
 * @changes
 *   - config.phpë¥¼ ì‚¬ìš©í•˜ì—¬ Firebase JSON íŒŒì¼ê³¼ í† í”½ ì„¤ì • ê´€ë¦¬
 *   - devices.phpì˜ ì•Œë¦¼ ì „ì†¡ ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ ê°œì„ 
 *   - ë” ìƒì„¸í•œ ì‘ë‹µ ë©”ì‹œì§€ ë° ì—ëŸ¬ í•¸ë“¤ë§
 *   - ì „ì†¡ íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€
 */

// config.php ë¡œë“œ
require_once __DIR__ . '/config.php';

// ì˜¤ë¥˜ ë³´ê³  ì„¤ì •
error_reporting(E_ALL);
ini_set('display_errors', 1);

// í—¤ë” ì„¤ì • - JSON ì‘ë‹µ
header('Content-Type: application/json');
```

**2) ì‘ë‹µ ë°°ì—´ì— íƒ€ì„ìŠ¤íƒ¬í”„ ì¶”ê°€**

ë³€ê²½ ì „ (line 19-23):
```php
$response = [
    'success' => false,
    'message' => '',
    'data' => []
];
```

ë³€ê²½ í›„ (line 31-36):
```php
$response = [
    'success' => false,
    'message' => '',
    'data' => [],
    'timestamp' => date('Y-m-d H:i:s')  // ì „ì†¡ ì‹œê° ì¶”ê°€
];
```

**3) ì „ì²´ í‘¸ì‹œ ì²˜ë¦¬ (í† í”½ ì‚¬ìš©) ê°œì„ **

ë³€ê²½ ì „ (line 56-94):
```php
if ($push_type === 'group') {
    // ë””ë²„ê¹…: ìˆ˜ì‹ ëœ ëª¨ë“  íŒŒë¼ë¯¸í„° ê¸°ë¡
    error_log('Group push request - Parameters: ' . print_r($_REQUEST, true));

    // ì „ì²´ í‘¸ì‹œ ì²˜ë¦¬
    if (empty($title) || empty($memo)) {
        $response['message'] = 'í•„ìˆ˜ íŒŒë¼ë¯¸í„°ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤. title, memoëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.';
        echo json_encode($response);
        exit;
    }

    // í† í”½ ì´ë¦„ì€ ì˜ë¬¸ì, ìˆ«ì, ë°‘ì¤„(_)ë§Œ í¬í•¨í•´ì•¼ í•¨
    $topic_name = 'news_test';  // í•˜ë“œì½”ë”©

    // 'news' í† í”½ìœ¼ë¡œ ì „ì²´ í‘¸ì‹œ ì „ì†¡
    $result = send_topic_push($topic_name, $title, $memo, $url, $file_url);

    // ê²°ê³¼ ì²˜ë¦¬
    if ($result) {
        $response['success'] = true;
        $response['message'] = 'ì „ì²´ í‘¸ì‹œ ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.';
        $response['data'] = [
            'topic' => $topic_name,
            'title' => $title,
            'memo' => $memo,
            'url' => $url,
            'file_url' => $file_url
        ];
    } else {
        // ë””ë²„ê¹…: ë” ìì„¸í•œ ì˜¤ë¥˜ ì •ë³´
        $error_logs = error_get_last();
        $response['message'] = 'ì „ì²´ í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';
        $response['data'] = [
            'debug_info' => 'í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ "news" í† í”½ì„ êµ¬ë…í–ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.',
            'error' => $error_logs ? $error_logs['message'] : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜',
            'request' => $_REQUEST
        ];
    }
}
```

ë³€ê²½ í›„ (line 71-127):
```php
if ($push_type === 'group') {
    // ë””ë²„ê¹…: ìˆ˜ì‹ ëœ ëª¨ë“  íŒŒë¼ë¯¸í„° ê¸°ë¡
    error_log('Group push request - Parameters: ' . print_r($_REQUEST, true));

    // ì „ì²´ í‘¸ì‹œ ì²˜ë¦¬
    if (empty($title) || empty($memo)) {
        $response['message'] = 'í•„ìˆ˜ íŒŒë¼ë¯¸í„°ê°€ ëˆ„ë½ë˜ì—ˆìŠµë‹ˆë‹¤. title, memoëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.';
        echo json_encode($response);
        exit;
    }

    // config.phpì—ì„œ í† í”½ ì´ë¦„ ê°€ì ¸ì˜¤ê¸° (í•˜ë“œì½”ë”© ì œê±°)
    $topic_name = get_topic_name();

    // í† í”½ ì´ë¦„ ìœ íš¨ì„± ê²€ì‚¬
    if (!validate_topic_name($topic_name)) {
        $response['message'] = 'í† í”½ ì´ë¦„ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”.';
        $response['data'] = [
            'topic' => $topic_name,
            'error' => 'í† í”½ ì´ë¦„ì€ ì˜ë¬¸ì, ìˆ«ì, ë°‘ì¤„(_), í•˜ì´í”ˆ(-)ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.'
        ];
        echo json_encode($response);
        exit;
    }

    // í† í”½ìœ¼ë¡œ ì „ì²´ í‘¸ì‹œ ì „ì†¡
    $result = send_topic_push($topic_name, $title, $memo, $url, $file_url);

    // ê²°ê³¼ ì²˜ë¦¬
    if ($result) {
        $response['success'] = true;
        $response['message'] = 'ì „ì²´ í‘¸ì‹œ ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.';
        $response['data'] = [
            'push_type' => 'topic',
            'topic' => $topic_name,
            'title' => $title,
            'memo' => $memo,
            'url' => $url,
            'file_url' => $file_url,
            'success_count' => 1,
            'fail_count' => 0
        ];
    } else {
        // ë””ë²„ê¹…: ë” ìì„¸í•œ ì˜¤ë¥˜ ì •ë³´
        $error_logs = error_get_last();
        $response['message'] = 'ì „ì²´ í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.';
        $response['data'] = [
            'push_type' => 'topic',
            'topic' => $topic_name,
            'debug_info' => 'í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ "' . $topic_name . '" í† í”½ì„ êµ¬ë…í–ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.',
            'error' => $error_logs ? $error_logs['message'] : 'ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜',
            'firebase_config' => get_firebase_json_path(),
            'success_count' => 0,
            'fail_count' => 1
        ];
    }
}
```

**ë³€ê²½ í¬ì¸íŠ¸**:
- í•˜ë“œì½”ë”©ëœ `'news_test'` â†’ `get_topic_name()` í•¨ìˆ˜ ì‚¬ìš©
- í† í”½ ì´ë¦„ ìœ íš¨ì„± ê²€ì‚¬ ì¶”ê°€
- ì‘ë‹µ ë°ì´í„°ì— `push_type`, `success_count`, `fail_count` ì¶”ê°€
- ì—ëŸ¬ ë©”ì‹œì§€ì— Firebase ì„¤ì • íŒŒì¼ ê²½ë¡œ ì¶”ê°€

**4) send_push_v1_jwt() í•¨ìˆ˜ ê°œì„ **

ë³€ê²½ ì „ (line 164-196):
```php
/**
 * í‘¸ì‹œ ì•Œë¦¼ ë°œì†¡ í•¨ìˆ˜ (JWT ì¸ì¦ ì‚¬ìš©)
 *
 * @param string $app        ì•± ìœ í˜• (android ë˜ëŠ” ios)
 * @param string $user_token ì‚¬ìš©ì FCM í† í°
 * @param string $title      ì•Œë¦¼ ì œëª©
 * @param string $memo       ì•Œë¦¼ ë‚´ìš©
 * @param string $url2       ì•Œë¦¼ í´ë¦­ ì‹œ ì´ë™í•  URL
 *
 * @return int ì„±ê³µ ìˆ˜ëŸ‰
 */
function send_push_v1_jwt($app, $user_token, $title, $memo, $url2)
{
    global $dc, $Dcs, $member;

    $arg1 = '$arg1';
    $arg2 = '$arg2';
    $arg3 = '$arg3';

    // $url2 ê°’ í™•ì¸ ë° ê¸°ë³¸ ê°’ ì§€ì •
	if ($url2 === null || $url2 == "" || $url2 == "http://" || $url2 == "https://") {
		$url2 = "https://edumars.net?call=push";
	} else {
        // URLì— ?call=push ì¶”ê°€
        $url2 = rtrim($url2, '?&') . (strpos($url2, '?') !== false ? '&' : '?') . 'call=push';
    }

    // FCM ì„œë²„ URL
    $url = 'https://fcm.googleapis.com/v1/projects/mars-38372/messages:send';  // í•˜ë“œì½”ë”©

    // ì„œë¹„ìŠ¤ ê³„ì • í‚¤ íŒŒì¼ì˜ ê²½ë¡œ
    $serviceAccountPath = __DIR__ . '/mars-38372-firebase-adminsdk-60l5a-23f211e854.json';  // í•˜ë“œì½”ë”©
```

ë³€ê²½ í›„ (line 197-234):
```php
/**
 * í‘¸ì‹œ ì•Œë¦¼ ë°œì†¡ í•¨ìˆ˜ (JWT ì¸ì¦ ì‚¬ìš©)
 *
 * config.phpì˜ ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ ê°œë³„ í‘¸ì‹œ ì•Œë¦¼ì„ ì „ì†¡í•©ë‹ˆë‹¤.
 *
 * @param string $app        ì•± ìœ í˜• (android ë˜ëŠ” ios)
 * @param string $user_token ì‚¬ìš©ì FCM í† í°
 * @param string $title      ì•Œë¦¼ ì œëª©
 * @param string $memo       ì•Œë¦¼ ë‚´ìš©
 * @param string $url2       ì•Œë¦¼ í´ë¦­ ì‹œ ì´ë™í•  URL
 *
 * @return int ì„±ê³µ ìˆ˜ëŸ‰
 */
function send_push_v1_jwt($app, $user_token, $title, $memo, $url2)
{
    global $dc, $Dcs, $member;

    // ì¸í…íŠ¸ íŒŒë¼ë¯¸í„° ì„¤ì •
    $arg1 = '$arg1';
    $arg2 = '$arg2';
    $arg3 = '$arg3';

    // URL ê°’ í™•ì¸ ë° ê¸°ë³¸ ê°’ ì§€ì •
	if ($url2 === null || $url2 == "" || $url2 == "http://" || $url2 == "https://") {
		$url2 = "https://edumars.net?call=push";
	} else {
        // URLì— ?call=push ì¶”ê°€
        $url2 = rtrim($url2, '?&') . (strpos($url2, '?') !== false ? '&' : '?') . 'call=push';
    }

    // config.phpì—ì„œ í”„ë¡œì íŠ¸ ID ê°€ì ¸ì˜¤ê¸°
    $project_id = get_project_id();

    // FCM ì„œë²„ URL (í”„ë¡œì íŠ¸ ID ë™ì  ì ìš©)
    $url = 'https://fcm.googleapis.com/v1/projects/' . $project_id . '/messages:send';

    // config.phpì—ì„œ ì„œë¹„ìŠ¤ ê³„ì • íŒŒì¼ ê²½ë¡œ ê°€ì ¸ì˜¤ê¸°
    $serviceAccountPath = get_firebase_json_path();
```

**ë³€ê²½ í¬ì¸íŠ¸**:
- í•˜ë“œì½”ë”©ëœ í”„ë¡œì íŠ¸ ID â†’ `get_project_id()` í•¨ìˆ˜ ì‚¬ìš©
- í•˜ë“œì½”ë”©ëœ íŒŒì¼ ê²½ë¡œ â†’ `get_firebase_json_path()` í•¨ìˆ˜ ì‚¬ìš©
- ì£¼ì„ ë³´ê°• (config.php ì‚¬ìš© ëª…ì‹œ)

**5) send_topic_push() í•¨ìˆ˜ ê°œì„ **

ë³€ê²½ ì „ (line 376-404):
```php
/**
 * í† í”½ í‘¸ì‹œ ì•Œë¦¼ ë°œì†¡ í•¨ìˆ˜
 *
 * @param string $topic      í† í”½ ì´ë¦„
 * @param string $title      ì•Œë¦¼ ì œëª©
 * @param string $memo       ì•Œë¦¼ ë‚´ìš©
 * @param string $url        ì•Œë¦¼ í´ë¦­ ì‹œ ì´ë™í•  URL
 * @param string $file_url   ì•Œë¦¼ì— í‘œì‹œí•  ì´ë¯¸ì§€ URL
 *
 * @return bool ì„±ê³µ ì—¬ë¶€
 */
function send_topic_push($topic, $title, $memo, $url, $file_url = '') {
    // URL ê°’ í™•ì¸ ë° ê¸°ë³¸ ê°’ ì§€ì •
    if ($url === null || $url == "" || $url == "http://" || $url == "https://") {
        $url = "https://edumars.net?call=push";
    } else {
        // URLì— ?call=push ì¶”ê°€
        $url = rtrim($url, '?&') . (strpos($url, '?') !== false ? '&' : '?') . 'call=push';
    }

    $arg1 = '$arg1';
    $arg2 = '1';  // íŒì—… ë°©ì‹ì„ ì›í•˜ë©´ 1 ì•„ë‹ˆë©´ 0
    $arg3 = 'MARS';  // ë³´ë‚¸ ì‚¬ëŒ

    // FCM ì„œë²„ URL
    $fcm_url = 'https://fcm.googleapis.com/v1/projects/mars-38372/messages:send';  // í•˜ë“œì½”ë”©

    // ì„œë¹„ìŠ¤ ê³„ì • í‚¤ íŒŒì¼ì˜ ê²½ë¡œ
    $serviceAccountPath = __DIR__ . '/mars-38372-firebase-adminsdk-60l5a-23f211e854.json';  // í•˜ë“œì½”ë”©
```

ë³€ê²½ í›„ (line 414-448):
```php
/**
 * í† í”½ í‘¸ì‹œ ì•Œë¦¼ ë°œì†¡ í•¨ìˆ˜
 *
 * config.phpì˜ ì„¤ì •ì„ ì‚¬ìš©í•˜ì—¬ í† í”½ ê¸°ë°˜ ì „ì²´ í‘¸ì‹œ ì•Œë¦¼ì„ ì „ì†¡í•©ë‹ˆë‹¤.
 *
 * @param string $topic      í† í”½ ì´ë¦„
 * @param string $title      ì•Œë¦¼ ì œëª©
 * @param string $memo       ì•Œë¦¼ ë‚´ìš©
 * @param string $url        ì•Œë¦¼ í´ë¦­ ì‹œ ì´ë™í•  URL
 * @param string $file_url   ì•Œë¦¼ì— í‘œì‹œí•  ì´ë¯¸ì§€ URL
 *
 * @return bool ì„±ê³µ ì—¬ë¶€
 */
function send_topic_push($topic, $title, $memo, $url, $file_url = '') {
    // URL ê°’ í™•ì¸ ë° ê¸°ë³¸ ê°’ ì§€ì •
    if ($url === null || $url == "" || $url == "http://" || $url == "https://") {
        $url = "https://edumars.net?call=push";
    } else {
        // URLì— ?call=push ì¶”ê°€
        $url = rtrim($url, '?&') . (strpos($url, '?') !== false ? '&' : '?') . 'call=push';
    }

    // ì¸í…íŠ¸ íŒŒë¼ë¯¸í„° ì„¤ì •
    $arg1 = '$arg1';
    $arg2 = '1';  // íŒì—… ë°©ì‹ì„ ì›í•˜ë©´ 1 ì•„ë‹ˆë©´ 0
    $arg3 = 'MARS';  // ë³´ë‚¸ ì‚¬ëŒ

    // config.phpì—ì„œ í”„ë¡œì íŠ¸ ID ê°€ì ¸ì˜¤ê¸°
    $project_id = get_project_id();

    // FCM ì„œë²„ URL (í”„ë¡œì íŠ¸ ID ë™ì  ì ìš©)
    $fcm_url = 'https://fcm.googleapis.com/v1/projects/' . $project_id . '/messages:send';

    // config.phpì—ì„œ ì„œë¹„ìŠ¤ ê³„ì • íŒŒì¼ ê²½ë¡œ ê°€ì ¸ì˜¤ê¸°
    $serviceAccountPath = get_firebase_json_path();
```

**ë³€ê²½ í¬ì¸íŠ¸**:
- í•˜ë“œì½”ë”©ëœ í”„ë¡œì íŠ¸ ID â†’ `get_project_id()` í•¨ìˆ˜ ì‚¬ìš©
- í•˜ë“œì½”ë”©ëœ íŒŒì¼ ê²½ë¡œ â†’ `get_firebase_json_path()` í•¨ìˆ˜ ì‚¬ìš©
- ì£¼ì„ ë³´ê°•

---

## ë³€ê²½ ì‚¬í•­ ìƒì„¸

### í•˜ë“œì½”ë”© ì œê±°

**ë³€ê²½ ì „**:
```php
// ì—¬ëŸ¬ ê³³ì— í•˜ë“œì½”ë”©ë¨
$topic_name = 'news_test';
$url = 'https://fcm.googleapis.com/v1/projects/mars-38372/messages:send';
$serviceAccountPath = __DIR__ . '/mars-38372-firebase-adminsdk-60l5a-23f211e854.json';
```

**ë³€ê²½ í›„**:
```php
// config.phpì—ì„œ ë™ì ìœ¼ë¡œ ê°€ì ¸ì˜´
$topic_name = get_topic_name();
$project_id = get_project_id();
$url = 'https://fcm.googleapis.com/v1/projects/' . $project_id . '/messages:send';
$serviceAccountPath = get_firebase_json_path();
```

**ì¥ì **:
- âœ… ì„¤ì • ë³€ê²½ì´ ë§¤ìš° ì‰¬ì›€ (settings.phpì—ì„œ ë³€ê²½)
- âœ… ì†ŒìŠ¤ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”
- âœ… ì—¬ëŸ¬ í”„ë¡œì íŠ¸ ê´€ë¦¬ ê°€ëŠ¥
- âœ… ì‹¤ìˆ˜ ë°©ì§€ (ëª¨ë“  íŒŒì¼ì—ì„œ ë™ì¼í•œ ì„¤ì • ì‚¬ìš©)

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. ì„¤ì • ê´€ë¦¬

**ì´ì „**:
- Firebase JSON íŒŒì¼ëª… ë³€ê²½ â†’ ì†ŒìŠ¤ ì½”ë“œ ì§ì ‘ ìˆ˜ì • í•„ìš”
- í† í”½ ì´ë¦„ ë³€ê²½ â†’ ì†ŒìŠ¤ ì½”ë“œ ì§ì ‘ ìˆ˜ì • í•„ìš”
- ë³€ê²½ ì‹œ ì—¬ëŸ¬ íŒŒì¼ ìˆ˜ì • í•„ìš” (push_api.php, push.lib.php ë“±)

**í˜„ì¬**:
- settings.phpì—ì„œ ì›¹ UIë¡œ ë³€ê²½
- ì†ŒìŠ¤ ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”
- í•œ ê³³ì—ì„œ ì„¤ì •í•˜ë©´ ëª¨ë“  íŒŒì¼ì— ìë™ ë°˜ì˜

### 2. Firebase JSON íŒŒì¼ ê´€ë¦¬

**ê¸°ëŠ¥**:
- í˜„ì¬ íŒŒì¼ ì •ë³´ í‘œì‹œ
- í´ë” ë‚´ JSON íŒŒì¼ ëª©ë¡ì—ì„œ ì„ íƒ
- JSON íŒŒì¼ ë‚´ìš© ì§ì ‘ í¸ì§‘
- ìë™ í¬ë§·íŒ… (JSON ì •ë ¬)
- ìˆ˜ì • ì‹œ ìë™ ë°±ì—…
- ìœ íš¨ì„± ê²€ì‚¬ (í•„ìˆ˜ í‚¤ í™•ì¸, í˜•ì‹ ê²€ì‚¬)

**ë°±ì—… ë°©ì‹**:
```
ì›ë³¸: mars-38372-firebase-adminsdk-60l5a-23f211e854.json
ë°±ì—…: mars-38372-firebase-adminsdk-60l5a-23f211e854.json.backup.20251218153045
```

### 3. í† í”½ ê´€ë¦¬

**ê²€ì¦ ê·œì¹™**:
- ê¸¸ì´: 1~900ì
- í—ˆìš© ë¬¸ì: ì˜ë¬¸ì(a-z, A-Z), ìˆ«ì(0-9), ë°‘ì¤„(_), í•˜ì´í”ˆ(-)
- ê³µë°± ë° íŠ¹ìˆ˜ë¬¸ì ë¶ˆê°€

**ì˜ˆì‹œ**:
```
âœ… í—ˆìš©: news_test, breaking-news, topic123, TEST_TOPIC
âŒ ë¶ˆê°€: news test, í† í”½, topic!, topic@home
```

### 4. ì‘ë‹µ ë©”ì‹œì§€ ê°œì„ 

**ë³€ê²½ ì „**:
```json
{
  "success": true,
  "message": "ì „ì²´ í‘¸ì‹œ ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "topic": "news_test",
    "title": "í…ŒìŠ¤íŠ¸",
    "memo": "ë‚´ìš©"
  }
}
```

**ë³€ê²½ í›„**:
```json
{
  "success": true,
  "message": "ì „ì²´ í‘¸ì‹œ ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "push_type": "topic",
    "topic": "news_test",
    "title": "í…ŒìŠ¤íŠ¸",
    "memo": "ë‚´ìš©",
    "url": "https://edumars.net?call=push",
    "file_url": "",
    "success_count": 1,
    "fail_count": 0
  },
  "timestamp": "2025-12-18 15:30:45"
}
```

**ì¶”ê°€ëœ ì •ë³´**:
- `push_type`: í‘¸ì‹œ ìœ í˜• (topic, individual ë“±)
- `success_count`: ì„±ê³µ ìˆ˜
- `fail_count`: ì‹¤íŒ¨ ìˆ˜
- `timestamp`: ì „ì†¡ ì‹œê°

---

## ì‚¬ìš© ë°©ë²•

### 1. ì„¤ì • ë³€ê²½

1. ë¸Œë¼ìš°ì €ì—ì„œ `index.php` ì ‘ì†
2. ìš°ì¸¡ ìƒë‹¨ "âš™ï¸ ì•Œë¦¼ì„¤ì •" ë²„íŠ¼ í´ë¦­
3. settings.php í˜ì´ì§€ì—ì„œ ì„¤ì • ë³€ê²½
   - í† í”½ ì´ë¦„ ë³€ê²½
   - Firebase JSON íŒŒì¼ ì„ íƒ/í¸ì§‘
4. ì €ì¥ ë²„íŠ¼ í´ë¦­

### 2. í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡

**ê°œë³„ í‘¸ì‹œ** (ê¸°ì¡´ê³¼ ë™ì¼):
```
POST /push_dashboard/new_http_v1_mars/push_api.php

app=android
user_token=FCM_TOKEN_HERE
title=ì•Œë¦¼ ì œëª©
memo=ì•Œë¦¼ ë‚´ìš©
url=https://edumars.net
```

**ì „ì²´ í‘¸ì‹œ** (ê¸°ì¡´ê³¼ ë™ì¼):
```
POST /push_dashboard/new_http_v1_mars/push_api.php

push_type=group
title=ì „ì²´ ì•Œë¦¼ ì œëª©
message=ì „ì²´ ì•Œë¦¼ ë‚´ìš©
url=https://edumars.net
```

### 3. ì„¤ì • íŒŒì¼ ì§ì ‘ ìˆ˜ì • (ê³ ê¸‰)

`push_config.json` íŒŒì¼ì„ ì§ì ‘ í¸ì§‘:
```json
{
    "firebase_json_file": "your-project-firebase-adminsdk.json",
    "topic_name": "your_topic_name",
    "project_id": "your-project-id"
}
```

---

## íŒŒì¼ êµ¬ì¡°

```
new_http_v1_mars/
â”œâ”€â”€ config.php                    âœ¨ ì‹ ê·œ - ì„¤ì • ê´€ë¦¬
â”œâ”€â”€ settings.php                  âœ¨ ì‹ ê·œ - ì„¤ì • UI
â”œâ”€â”€ push_config.json              âœ¨ ìë™ ìƒì„± - ì„¤ì • ì €ì¥
â”œâ”€â”€ index.php                     âœï¸ ìˆ˜ì • - ì•Œë¦¼ì„¤ì • ë²„íŠ¼ ì¶”ê°€
â”œâ”€â”€ push_api.php                  âœï¸ ìˆ˜ì • - config.php ì‚¬ìš©
â”œâ”€â”€ push.lib.php                  (ê¸°ì¡´ íŒŒì¼)
â”œâ”€â”€ send_push.php                 (ê¸°ì¡´ íŒŒì¼)
â”œâ”€â”€ mars-38372-....json          (Firebase JSON)
â””â”€â”€ *.backup.*                    âœ¨ ìë™ ìƒì„± - ë°±ì—… íŒŒì¼
```

---

## í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ

### 1. ì„¤ì • í˜ì´ì§€ í…ŒìŠ¤íŠ¸

1. `https://vps20-mars.andpia.com/push_dashboard/new_http_v1_mars/settings.php` ì ‘ì†
2. í† í”½ ì´ë¦„ ë³€ê²½ í…ŒìŠ¤íŠ¸
   - ìœ íš¨í•œ ì´ë¦„ ì…ë ¥ (ì˜ˆ: `test_topic_123`)
   - ì €ì¥ í›„ `push_config.json` í™•ì¸
3. Firebase JSON íŒŒì¼ ì„ íƒ í…ŒìŠ¤íŠ¸
   - ë‹¤ë¥¸ JSON íŒŒì¼ ì„ íƒ (ìˆëŠ” ê²½ìš°)
   - ì €ì¥ í›„ ì„¤ì • ë°˜ì˜ í™•ì¸
4. JSON ë‚´ìš© í¸ì§‘ í…ŒìŠ¤íŠ¸
   - ìë™ í¬ë§·íŒ… ë²„íŠ¼ í´ë¦­
   - ë‚´ìš© ìˆ˜ì • í›„ ì €ì¥
   - ë°±ì—… íŒŒì¼ ìƒì„± í™•ì¸

### 2. í‘¸ì‹œ ì „ì†¡ í…ŒìŠ¤íŠ¸

**ì „ì²´ í‘¸ì‹œ í…ŒìŠ¤íŠ¸**:
```bash
curl -X POST "https://vps20-mars.andpia.com/push_dashboard/new_http_v1_mars/push_api.php" \
  -d "push_type=group" \
  -d "title=í…ŒìŠ¤íŠ¸ ì „ì²´ í‘¸ì‹œ" \
  -d "message=ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤." \
  -d "url=https://edumars.net"
```

**ê°œë³„ í‘¸ì‹œ í…ŒìŠ¤íŠ¸**:
```bash
curl -X POST "https://vps20-mars.andpia.com/push_dashboard/new_http_v1_mars/push_api.php" \
  -d "app=android" \
  -d "user_token=YOUR_FCM_TOKEN" \
  -d "title=í…ŒìŠ¤íŠ¸ ê°œë³„ í‘¸ì‹œ" \
  -d "memo=ì´ê²ƒì€ ê°œë³„ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤." \
  -d "url=https://edumars.net"
```

### 3. ì‘ë‹µ í™•ì¸

**ì„±ê³µ ì‘ë‹µ**:
```json
{
  "success": true,
  "message": "ì „ì²´ í‘¸ì‹œ ì•Œë¦¼ì´ ì„±ê³µì ìœ¼ë¡œ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "data": {
    "push_type": "topic",
    "topic": "news_test",
    "title": "í…ŒìŠ¤íŠ¸ ì „ì²´ í‘¸ì‹œ",
    "memo": "ì´ê²ƒì€ í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€ì…ë‹ˆë‹¤.",
    "url": "https://edumars.net?call=push",
    "file_url": "",
    "success_count": 1,
    "fail_count": 0
  },
  "timestamp": "2025-12-18 15:45:30"
}
```

**ì‹¤íŒ¨ ì‘ë‹µ**:
```json
{
  "success": false,
  "message": "ì „ì²´ í‘¸ì‹œ ì•Œë¦¼ ì „ì†¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.",
  "data": {
    "push_type": "topic",
    "topic": "news_test",
    "debug_info": "í´ë¼ì´ì–¸íŠ¸ ì•±ì—ì„œ \"news_test\" í† í”½ì„ êµ¬ë…í–ˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.",
    "error": "ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜",
    "firebase_config": "/path/to/firebase.json",
    "success_count": 0,
    "fail_count": 1
  },
  "timestamp": "2025-12-18 15:46:12"
}
```

---

## ì£¼ì˜ì‚¬í•­

1. **Firebase JSON íŒŒì¼ ë³´ì•ˆ**
   - JSON íŒŒì¼ì—ëŠ” ë¯¼ê°í•œ ì •ë³´(private_key)ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤
   - ì›¹ ë£¨íŠ¸ ì™¸ë¶€ì— ë°°ì¹˜í•˜ê±°ë‚˜ .htaccessë¡œ ì ‘ê·¼ ì œí•œì„ ê¶Œì¥í•©ë‹ˆë‹¤
   - í˜„ì¬ëŠ” ê°™ì€ í´ë”ì— ìœ„ì¹˜ (ê¸°ì¡´ êµ¬ì¡° ìœ ì§€)

2. **ë°±ì—… íŒŒì¼ ê´€ë¦¬**
   - JSON ìˆ˜ì • ì‹œë§ˆë‹¤ ë°±ì—… íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤
   - ì£¼ê¸°ì ìœ¼ë¡œ ì˜¤ë˜ëœ ë°±ì—… íŒŒì¼ ì‚­ì œë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤

3. **í† í”½ êµ¬ë…**
   - ì „ì²´ í‘¸ì‹œê°€ ì‘ë™í•˜ë ¤ë©´ ì•±ì—ì„œ í† í”½ì„ êµ¬ë…í•´ì•¼ í•©ë‹ˆë‹¤
   - Android/iOS ì•± ì½”ë“œì—ì„œ í† í”½ êµ¬ë… êµ¬í˜„ í•„ìš”:
     ```java
     // Android
     FirebaseMessaging.getInstance().subscribeToTopic("news_test");
     ```
     ```swift
     // iOS
     Messaging.messaging().subscribe(toTopic: "news_test")
     ```

4. **ì„¤ì • íŒŒì¼ ê¶Œí•œ**
   - `push_config.json` íŒŒì¼ì€ ì›¹ ì„œë²„ê°€ ì“°ê¸° ê¶Œí•œì´ ìˆì–´ì•¼ í•©ë‹ˆë‹¤
   - í•„ìš”ì‹œ ê¶Œí•œ ì¡°ì •: `chmod 664 push_config.json`

---

## íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ì„¤ì •ì´ ì €ì¥ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: íŒŒì¼ ì“°ê¸° ê¶Œí•œ ë¶€ì¡±

**í•´ê²°**:
```bash
chmod 664 /www/push_dashboard/new_http_v1_mars/push_config.json
```

### ë¬¸ì œ 2: ì „ì²´ í‘¸ì‹œê°€ ì „ì†¡ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: ì•±ì—ì„œ í† í”½ êµ¬ë… ë¯¸ì‹¤ì‹œ

**í•´ê²°**:
1. ì•± ì½”ë“œì—ì„œ í† í”½ êµ¬ë… ì½”ë“œ ì¶”ê°€
2. í† í”½ ì´ë¦„ í™•ì¸ (settings.phpì—ì„œ í™•ì¸)
3. Firebase Consoleì—ì„œ í† í”½ ë©”ì‹œì§€ í…ŒìŠ¤íŠ¸

### ë¬¸ì œ 3: Firebase JSON ìœ íš¨ì„± ê²€ì‚¬ ì‹¤íŒ¨

**ì›ì¸**: JSON í˜•ì‹ ì˜¤ë¥˜ ë˜ëŠ” í•„ìˆ˜ í‚¤ ëˆ„ë½

**í•´ê²°**:
1. Firebase Consoleì—ì„œ ìƒˆ JSON íŒŒì¼ ë‹¤ìš´ë¡œë“œ
2. JSON í¬ë§·íŒ… ë„êµ¬ë¡œ ê²€ì¦
3. í•„ìˆ˜ í‚¤ í™•ì¸: type, project_id, private_key, client_email, token_uri

---

## ë²„ì „ ì •ë³´

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|------|-----------|
| 2.0.0 | 2025-12-18 | config.php, settings.php ì¶”ê°€, push_api.php ê°œì„  |
| 1.0.0 | 2024-10-03 | ìµœì´ˆ ë²„ì „ |

---

## ì°¸ê³  ìë£Œ

- [Firebase Cloud Messaging ë¬¸ì„œ](https://firebase.google.com/docs/cloud-messaging)
- [FCM HTTP v1 API](https://firebase.google.com/docs/reference/fcm/rest/v1/projects.messages)
- [FCM í† í”½ ë©”ì‹œì§•](https://firebase.google.com/docs/cloud-messaging/topic-messaging)

---

**ì‘ì„± ì™„ë£Œì¼**: 2025-12-18
**ë¬¸ì˜**: ì‹œìŠ¤í…œ ê´€ë¦¬ì
